<h1 class= 'title'>我的文章</h1>

<% @stories.each do |story| %>

  <div class="content">
    <div class="buttons">

      <h2 class="title">
        <%= story.title %>
        <%= content_tag :span, '已發佈', class: 'tag is-primary' if story.published? %>
        <%= content_tag :span, '未發佈', class: 'tag' if story.draft? %>
        <%= content_tag :span, '編輯中', class: 'tag' if story.pending_story != nil %>
      </h2> 

      

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="is-hoverable navbar-link"></a>

        <div class="navbar-dropdown">
          <div>
            <% if story.pending_story != nil %>
              <%= link_to '編輯', edit_pending_story_path(story), class: "navbar-item" %>
              <%= link_to '更新文章', publish_story_path(story), method: 'post', class: "navbar-item" %>
            <% else %>
              <%= link_to '編輯', edit_story_path(story), class: "navbar-item" %>
            <% end %>
          </div>
          <% if story.draft? %>
            <%= link_to '發布文章', publish_story_path(story), method: 'post', class: "navbar-item" %>
          <% end %>
          <div>
            <% if story.published? %>
              <%= link_to '下架文章', unpublish_story_path(story), method: 'post', class: "navbar-item", data:{confirm: '確認下架？'} %>
            <% else %>
              <%= link_to '刪除草稿', story_path(story), method: 'delete', class: "navbar-item", data:{confirm: '確認刪除？'} %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <p><%= story.content %></p>

    <div>
      <p>最後更新時間：<%= time_ago_in_words(story.updated_at) %>前</p>
      <p>創建時間：<%= story.created_at.to_date %></p>
    </div>
    <hr>
  </div>
<% end %> 
